<h1>User Details</h1>

<div class="card mt-4">
  <div class="card-body">
    <h5 class="card-title"><%= @user.email %></h5>
    <p class="card-text">
      <strong>First Name:</strong> <%= @user.first_name %><br>
      <strong>Last Name:</strong> <%= @user.last_name %><br>
      <strong>Created At:</strong> <%= @user.created_at.strftime("%Y-%m-%d %H:%M") %><br>
      <strong>Updated At:</strong> <%= @user.updated_at.strftime("%Y-%m-%d %H:%M") %>
    </p>

    <%= link_to "Edit User", edit_user_path(@user), class: "btn btn-warning me-2" %>
    <%= link_to "Back to Users", users_path, class: "btn btn-secondary" %>
  </div>
</div>

<hr>

<h3>Chats Participating</h3>
<ul class="list-group mb-3">
  <% (@user.sent_chats + @user.received_chats).uniq.each do |chat| %>
    <li class="list-group-item">
      Chat between <%= chat.sender.email %> and <%= chat.receiver.email %>
      <%= link_to "View", chat_path(chat), class: "btn btn-sm btn-outline-primary float-end" %>
    </li>
  <% end %>
</ul>

<h3>Messages Sent</h3>
<ul class="list-group">
  <% @user.messages.each do |message| %>
    <li class="list-group-item">
      In Chat #<%= message.chat.id %>: <%= message.body %>
      <%= link_to "View", message_path(message), class: "btn btn-sm btn-outline-secondary float-end" %>
    </li>
  <% end %>
</ul>
